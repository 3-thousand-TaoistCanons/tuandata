 <?php use \Tuanduimao\Loader\App as App;?>
 <div class="block-content"
	 data-toggle="slimscroll" 
     data-height="screen-height"
     data-offset='160'
     id="TAB_LIST_SETTING_BLOCK" 
>


<form id="TAB_DATA_SETTING_FORM" 
          class="js-validation-TAB_DATA_SETTING_FORM form-horizontal" 
          action="<?=App::NR('Datatype','SettingSave',['action'=>'setting'])?>" method="post" >

	<!-- FORM GROUP GROUP_14671152294796759 -->
	<div class="form-group">

		<!-- 列表标签  组件单行文本 (inlinetext)-->
		<div class="col-lg-9 col-md-9 col-md-9 col-xs-9"> 
		 	<div class="input-group">
		 		<div class="input-group-addon font-w300">列表选项卡</div> 
		      	<select 
				    id="ID_14671162108074461" name="readable[]"
				    class="js-select2 form-control" 
				    style="width: 100%;" placeholder=""  >
					<option>默认</option>
					<option>订阅一</option>
				</select>
		    </div>
		</div>

		<div class="col-lg-3 col-sm-3 col-md-3 col-xs-3">
			<button class="btn btn-primary  pull-right font-w300" type="button"><i class="fa fa-plus"></i> 添加选项卡 </button>
		</div>
		<!-- END 列表标签  组件单行文本 (inlinetext)-->

	</div>


	<div class="form-group">
		<!-- 中文名称  组件单行文本 (inlinetext)-->
		<div class="col-lg-6 col-md-6 col-xs-6 push-20-t"> 
		 	<div class="form-material">
		      	<input 	id="ID_14671152294797576" name="cname" 
		      			type="text"  	
		 
						class="form-control"  placeholder="请填写类型名称"  
						value="<?=(isset($inst['cname'])) ? $inst['cname'] : '' ?>"
						 />
		
		      	<label class="title" for="cname">标签名称</label>
		      	<div class="help-block text-right"></div>
		 	</div>
		</div><!-- END 中文名称  组件单行文本 (inlinetext)-->

		<!-- 中文名称  组件单行文本 (inlinetext)-->
		<div class="col-lg-6 col-md-6 col-xs-6  push-20-t"> 
		 	<div class="form-material">
		      	<input 	id="ID_14671152294797576" name="cname" 
		      			type="text" 
						class="form-control"  placeholder="请填写类型名称"  
						value="<?=(isset($inst['cname'])) ? $inst['cname'] : '' ?>"
						 />
		
		      	<label class="title" for="cname"> 关键词 (全文检索) </label>
		      	<div class="help-block text-right"></div>

		 	</div>
		</div><!-- END 中文名称  组件单行文本 (inlinetext)-->

	</div>

	<div class="form-group">

		<!-- 显示字段  组件多选清单 (multiselector)-->
		<div class="col-lg-12 col-md-12 col-xs-12"> 
			
			<div class="form-material">
				<label class="title" for="fields">显示字段</label>
			</div>
			
			<select multiple class="searchable" name="fields[]">
				<?php 
				$fields = [1,2,3,4,5,6,7];
				foreach ($fields as $idx => $fd) :?>
				<option 
                    data-icon="fa fa-angellist"
                    value="uuid<?=$idx?>"  > 
                     字段<?=$idx?>
               	</option>
               <?php endforeach; ?>
			</select>

		</div>
		<!-- 显示字段  组件多选清单 (multiselector)-->
	</div>


	<!-- 过滤条件 -->
	<div class="form-group">

		<!-- 列表标签  组件单行文本 (inlinetext)-->
		<div class="col-lg-12 col-md-12 col-xs-12  push-20-t"> 
			<div class="form-material">
				<label class="title" for="cname">高级过滤条件</label>
			</div>
		</div>
		
		<div class="col-lg-2 col-md-2 col-xs-2  col-sm-2  push-10-t"> 
			<div class="input-group">
		 		<div class="input-group-addon font-w300">关系</div> 
		      	<select 
				    id="ID_14671162108074461" name="readable[]"
				    class="js-select2 form-control" 
				    style="width: 100%;" placeholder=""  >
					<option>与</option>
					<option>或</option>
				</select>
		    </div>
		</div>


		<div class="col-lg-3 col-md-3 col-xs-3  col-sm-3 push-10-t"> 
			<div class="input-group">
		 		<div class="input-group-addon font-w300">字段</div> 
		      	<select 
				    id="ID_14671162108074461" name="readable[]"
				    class="js-select2 form-control" 
				    style="width: 100%;" placeholder=""  >
					<option>姓名</option>
					<option>手机号</option>
				</select>
		    </div>
		 </div>

		<div class="col-lg-2 col-md-2 col-xs-2  col-sm-2 push-10-t"> 
			<div class="input-group">
		 		<div class="input-group-addon font-w300">条件</div> 
		      	<select 
				    id="ID_14671162108074461" name="readable[]"
				    class="js-select2 form-control" 
				    style="width: 100%;" placeholder=""  >
					<option>匹配</option>
					<option>=</option>
					<option>&lt;</option>
					<option>&gt;</option>    
					<option>≥</option>
					<option>≤</option>
					<option>≠</option>
				</select>
		    </div>
		</div>

		<div class="col-lg-3 col-md-3 col-xs-3  col-sm-3  push-10-t"> 
			<div class="input-group">
		 		<div class="input-group-addon font-w300">数值</div> 
		      	<input 	id="ID_146711522947975762" name="cname" 
		      			type="text" 
						class="form-control"  placeholder="请填写数值"  
						value="" />
		    </div>
		</div>

		<div class="col-lg-2 col-md-2 col-xs-2  col-sm-2 push-10-t text-left"> 
			<button class="btn btn-primary btn-xs  push-5-t font-w300" type="button"> <i class="fa fa-plus"></i> 添加 </button>
		</div>

	</div>
	<!-- END 过滤条件 -->

	
	<!-- 默认排序 -->
	<div class="form-group">

		<!-- 列表标签  组件单行文本 (inlinetext)-->
		<div class="col-lg-12 col-md-12 col-xs-12  push-20-t"> 
			<div class="form-material">
				<label class="title" for="cname">默认排序</label>
			</div>
		</div>

		

		<div class="col-lg-3 col-md-3 col-xs-3  col-sm-3 push-10-t"> 
			<div class="input-group">
		 		<div class="input-group-addon font-w300">字段</div> 
		      	<select 
				    id="ID_14671162108074461" name="readable[]"
				    class="js-select2 form-control" 
				    style="width: 100%;" placeholder=""  >
					<option>姓名</option>
					<option>手机号</option>
				</select>
		    </div>
		 </div>

		<div class="col-lg-2 col-md-2 col-xs-2  col-sm-2 push-10-t"> 
			<div class="input-group">
		 		<div class="input-group-addon font-w300">顺序</div> 
		      	<select 
				    id="ID_14671162108074461" name="readable[]"
				    class="js-select2 form-control" 
				    style="width: 100%;" placeholder=""  >
					<option>正序</option>
					<option>倒序</option>
				</select>
		    </div>
		</div>

		<div class="col-lg-2 col-md-2 col-xs-2  col-sm-2 push-10-t text-left"> 
			<button class="btn btn-primary btn-xs  push-5-t font-w300" type="button"> <i class="fa fa-plus"></i> 添加 </button>
		</div>

	</div>
	<!-- END 默认排序 -->


	<!-- 默认呈现样式 -->
	<div class="form-group">

		<!-- 列表标签  组件单行文本 (inlinetext)-->
		<div class="col-lg-12 col-md-12 col-xs-12  push-20-t"> 
			<div class="form-material">
				<label class="title" for="cname">默认呈现样式</label>
			</div>
		</div>

		<div class="col-lg-3 col-md-3 col-xs-3  col-sm-3 push-10-t"> 
			<div class="input-group">
		 		<div class="input-group-addon font-w300">样式</div> 
		      	<select 
				    id="ID_14671162108074461" name="readable[]"
				    class="js-select2 form-control" 
				    style="width: 100%;" placeholder=""  >
					<option>列表</option>
					<option>网格</option>
					<option>时间线</option>
				</select>
		    </div>
		 </div>

		<div class="col-lg-3 col-md-3 col-xs-3  col-sm-3  push-10-t"> 
			<div class="input-group">
		 		<div class="input-group-addon font-w300">模式</div> 
		      	<select 
				    id="ID_14671162108074461" name="readable[]"
				    class="js-select2 form-control" 
				    style="width: 100%;" placeholder=""  >
					<option>阅读模式</option>
					<option>管理模式</option>
				</select>
		    </div>
		</div>

	</div>
	<!-- END 默认排序 -->

	<!-- 默认呈现样式 -->
	<div class="form-group">
		<div class="col-lg-3 col-sm-3 col-md-3 col-xs-3 push-20-t push-20">
			<button class="btn btn-primary  font-w300" type="button"><i class="fa fa-save"></i> 保存配置 </button>
		</div>
	</div>


	<!-- 快捷功能操作面板 开始-->
	<div class="block block-quickpanel">
	    <div class="block-quickpanel-content text-center " >
			<div class="form-group">
				<!--   按钮组 (btngroup)-->
				<div class="col-lg-12 push-20-t">
			       
						<button  
							id="ID_14671172870094912_1" 
							type="submit" 
							class="btn btn-primary font-w300  push-20-r  update"  
						>
				            <i class="fa fa-save push-5-r"></i> 
							保存配置
						</button>
				</div>
			</div>
			<div class="bg-primary text-white text-center bottom-line"></div>	
	    </div>
	</div>
	<!-- 快捷功能操作面板 结束 -->


</form>
</div>

<script type="text/javascript">
$(function(){

	App.initHelpers(['slimscroll', 'ajax-submit','select2']);

	// 自动显示 QuickPanel
    $('#TAB_LIST_SETTING_BLOCK').slimScroll().bind('slimscrolling', function(e, pos){
    	
    	var max =  e.target.scrollHeight - e.target.offsetHeight;
    	// console.log( max - pos );
    	if ( max - pos > 0 ) {
    		$('.block-quickpanel', '#TAB_LIST_SETTING_BLOCK').removeClass('hidden').show();
    	} else  {
    		$('.block-quickpanel', '#TAB_LIST_SETTING_BLOCK').addClass('hidden').hide();
    	}
    });



	// 初始化 字段选择器 (#ID_14671163886114009) multiSelect
    $('.searchable', '.js-validation-TAB_DATA_SETTING_FORM').multiSelect({
      sortable: true,
      selectableHeader: "<div class='push-10-t' ><input type='text' class='form-control font-w300 search-input  push-15 '  autocomplete='off' placeholder='关键词'></div>",
      selectionHeader:  "<input type='text' class='form-control font-w300 search-input push-15 push-10-t' autocomplete='off' placeholder='关键词'>",
      afterInit: function(ms){
        var that = this,
            $selectableSearch = that.$selectableUl.prev().find('input'),
            $selectionSearch = that.$selectionUl.prev(),
            selectableSearchString = '#'+that.$container.attr('id')+' .ms-elem-selectable:not(.ms-selected)',
            selectionSearchString = '#'+that.$container.attr('id')+' .ms-elem-selection.ms-selected';

        that.qs1 = $selectableSearch.quicksearch(selectableSearchString)
        .on('keydown', function(e){
          if (e.which === 40){
            that.$selectableUl.focus();
            return false;
          }
        });

        that.qs2 = $selectionSearch.quicksearch(selectionSearchString)
        .on('keydown', function(e){
          if (e.which == 40){
            that.$selectionUl.focus();
            return false;
          }
        });
      },

      afterSelect: function(){
        this.qs1.cache();
        this.qs2.cache();
      },
      afterDeselect: function(){
        this.qs1.cache();
        this.qs2.cache();
      }
    });
})
</script>